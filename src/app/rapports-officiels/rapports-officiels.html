<div class="pt-24 max-w-7xl mx-auto px-4">

  <!-- ðŸ”° Titre -->
  <h1 class="text-3xl md:text-4xl font-extrabold text-green-700 mb-4 text-center">
    Rapports Officiels
  </h1>

  <!-- ðŸ”Ž Barre de recherche -->
  <div class="flex justify-center mb-6">
    <input
      [(ngModel)]="searchValue"
      type="text"
      placeholder="Rechercher un rapport..."
      class="w-full md:w-1/2 px-4 py-2 border rounded-lg shadow-sm focus:ring-2 focus:ring-green-600"
    />
  </div>

  <!-- â­ Filtres -->
  <div class="flex justify-center gap-2 flex-wrap mb-10">
    <button
      *ngFor="let cat of categories"
      (click)="selectCat(cat)"
      class="px-4 py-2 rounded-full border transition-all"
      [ngClass]="{
        'bg-green-600 text-white shadow-md': selectedCat === cat,
        'bg-white text-gray-600 hover:bg-gray-100': selectedCat !== cat
      }"
    >
      {{ cat }}
    </button>
  </div>

  <!-- ðŸ§± Masonry grid -->
  <div class="masonry">
    <div *ngFor="let r of filteredRapports"
      class="masonry-item bg-white rounded-xl shadow hover:shadow-lg transition-all hover:-translate-y-1 overflow-hidden cursor-pointer"
      (click)="openDetails(r)">

      <img [src]="r.image"
           class="w-full h-auto object-cover"
           alt="{{ r.titre }}" />

      <div class="p-4">
        <p class="text-xs text-gray-400 mb-1">{{ r.date }}</p>

        <h2 class="text-xl font-semibold text-green-700 mb-2">
          {{ r.titre }}
        </h2>

        <span class="inline-block px-3 py-1 text-sm rounded-full bg-green-100 text-green-700">
          {{ r.categorie }}
        </span>

        <button
          (click)="openPDF(r.fichier); $event.stopPropagation()"
          class="mt-3 w-full py-2 border border-green-600 text-green-700 rounded-lg hover:bg-green-600 hover:text-white transition-all"
        >
          Voir le rapport PDF
        </button>
      </div>

    </div>
  </div>


  <!-- ðŸŸ¢ MODAL (Vue dÃ©taillÃ©e) -->
  <div *ngIf="selectedRapport" class="modal-overlay" (click)="closeModal()">

    <div class="modal-content" (click)="$event.stopPropagation()">
      
      <img [src]="selectedRapport.image" class="w-full rounded-lg mb-3" />

      <h2 class="text-2xl font-bold text-green-700 mb-2">
        {{ selectedRapport.titre }}
      </h2>

      <p class="text-sm text-gray-500 mb-4">
        {{ selectedRapport.date }}
      </p>

      <p class="text-gray-700 mb-6">
        {{ selectedRapport.contenu }}
      </p>

      <button
        (click)="openPDF(selectedRapport.fichier)"
        class="w-full py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition-all"
      >
        Ouvrir le PDF
      </button>

      <button
        (click)="closeModal()"
        class="mt-3 w-full py-2 text-gray-600 hover:text-black transition"
      >
        Fermer
      </button>

    </div>
  </div>

</div>
