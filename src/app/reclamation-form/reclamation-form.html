<div class="font-exo2">

  <h2 class="text-3xl sm:text-4xl lg:text-5xl font-extrabold text-green-700 text-center mt-6 mb-10">
    R√©clamation
  </h2>

  <div class="w-full bg-white lg:py-14 px-4">
    <div class="max-w-7xl mx-auto flex flex-col lg:flex-row gap-12 px-6">

      <!-- ===== COLONNE GAUCHE ===== -->
      <div class="flex-1 max-w-[600px] text-gray-700 leading-relaxed text-lg">

        <p class="max-w-xl">
          Vous avez rencontr√© un probl√®me avec les services de la
          <span class="font-semibold text-green-700">SEN-CSU&nbsp;?</span>
          D√©posez votre r√©clamation ici et notre √©quipe vous r√©pondra rapidement.
        </p>

        <img src="assets/logo.png" alt="Logo SEN-CSU" class="w-80 my-8">

        <div class="w-80 h-[2px] bg-green-700 my-6"></div>

        <h3 class="text-2xl font-semibold text-green-700 mb-4">Coordonn√©es de contact</h3>

        <div class="flex items-start gap-3 mb-5">
          <span class="text-green-600 text-2xl">üìç</span>
          <a href="https://www.google.com/maps/place/Agence+de+la+CMU" target="_blank"
             class="text-green-700 hover:underline">
            Cit√© Keur Gorgui, Lot N¬∞4, Immeuble El Hadji Serigne M√©rina SYLLA<br>
            Dakar, S√©n√©gal
          </a>
        </div>

        <div class="flex items-center gap-3 mb-5">
          <span class="text-green-600 text-2xl">üìû</span>
          <a href="tel:+221338591515" class="text-green-700 hover:underline">
            +221 33 859 15 15
          </a>
        </div>

        <div class="flex items-center gap-3">
          <span class="text-green-600 text-2xl">‚úâÔ∏è</span>
          <a href="mailto:contact@agencecmu.sn" class="text-green-700 hover:underline">
            contact@agencecmu.sn
          </a>
        </div>

      </div>

      <!-- ===== FORMULAIRE ===== -->
      <form [formGroup]="form" (ngSubmit)="onSubmit()" class="grid grid-cols-1 sm:grid-cols-2 gap-5 flex-1">

        <!-- Objet -->
        <select formControlName="subject"
          [ngClass]="{'text-gray-400': !form.get('subject')?.value, 'text-black': form.get('subject')?.value}"
          class="sm:col-span-2 w-full p-4 bg-white border border-gray-200 rounded-md">
          <option value="" disabled selected hidden>Objet de la r√©clamation *</option>
          <option>Adh√©sion / Carte CSU</option>
          <option>Suivi / Prise en charge</option>
          <option>Autres</option>
        </select>
        <div *ngIf="hasError('subject', 'required')" class="sm:col-span-2 text-red-600 text-sm">
          L‚Äôobjet de la r√©clamation est requis.
        </div>

        <!-- Pr√©cision si Autres -->
        <input *ngIf="form.get('subject')?.value === 'Autres'"
               type="text"
               formControlName="customSubject"
               placeholder="Veuillez pr√©ciser l‚Äôobjet *"
               class="sm:col-span-2 w-full p-4 bg-white border border-gray-200 rounded-md" />
        <div *ngIf="form.hasError('customRequired') && form.touched"
             class="sm:col-span-2 text-red-600 text-sm">
          Veuillez pr√©ciser l‚Äôobjet de votre r√©clamation.
        </div>

        <!-- Message -->
        <textarea formControlName="message" placeholder="D√©crivez votre probl√®me *"
          class="sm:col-span-2 w-full h-36 p-4 bg-white border border-gray-200 rounded-md resize-none"></textarea>
        <div *ngIf="hasError('message', 'required')" class="sm:col-span-2 text-red-600 text-sm">
          Le message est requis.
        </div>

        <!-- Nom -->
        <input type="text" formControlName="fullname" placeholder="Nom complet *"
          class="w-full p-4 bg-white border border-gray-200 rounded-md" />
        <div *ngIf="hasError('fullname', 'required')" class="text-red-600 text-sm">Le nom est requis.</div>

        <!-- Email -->
        <input type="email" formControlName="email" placeholder="E-mail"
          class="w-full p-4 bg-white border border-gray-200 rounded-md" />
        <div *ngIf="hasError('email', 'email')" class="text-red-600 text-sm">L‚Äôe-mail n‚Äôest pas valide.</div>

        <!-- T√©l√©phone -->
        <input type="text" formControlName="phone" placeholder="T√©l√©phone"
          class="w-full p-4 bg-white border border-gray-200 rounded-md" />

        <!-- Erreur contact obligatoire -->
        <div *ngIf="form.hasError('contactRequired') && form.touched"
             class="sm:col-span-2 text-red-600 text-sm text-center">
          Veuillez renseigner au moins un moyen de contact : e-mail ou t√©l√©phone.
        </div>

        <!-- Bouton -->
        <button type="submit" [disabled]="loading || form.invalid"
          class="sm:col-span-2 mt-3 bg-green-700 text-white py-3 rounded-md font-semibold hover:bg-green-800 transition">
          <span *ngIf="!loading">Envoyer la r√©clamation ‚ûú</span>
          <span *ngIf="loading">Envoi en cours...</span>
        </button>

        <p *ngIf="submitted && !errorMsg" class="sm:col-span-2 text-green-700 text-center font-medium mt-2">
          ‚úîÔ∏è R√©clamation envoy√©e avec succ√®s !
        </p>
        <p *ngIf="errorMsg" class="sm:col-span-2 text-red-600 text-center font-medium mt-2">
          ‚ùå {{ errorMsg }}
        </p>

      </form>

    </div>
  </div>
</div>
